这是一个多人在线游戏的简单功能演示项目。
首先，检查项目结构，了解项目基本情况。
然后解决以下问题：
1、假如环境中没有配置 supabase 必要的环境变量，现在前端会报错：
```
[Supabase] Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY. Please add them to your .env.local
Uncaught Error: supabaseUrl is required.
    SupabaseClient SupabaseClient.ts:104
    createClient index.ts:46
    <anonymous> supabase.ts:14
SupabaseClient.ts:104:29
    SupabaseClient SupabaseClient.ts:104
    createClient index.ts:46
    <anonymous> supabase.ts:14
```
而我希望这种情况要在界面上有更友好的提示，而不是直接报错。请修改代码实现这个功能。
2、现在 ConnectRoom.tsx 中需要玩家手动填写 wss 地址，我希望改成从环境变量中读取 VITE_WEBSOCKET_URL，如果没有配置这个环境变量，则显示一个错误提示，告诉用户需要配置这个环境变量。

---

我把项目部署到 Github Pages 上了，并且在它的环境里配置了变量。但为什么还是提示我要配置呢？我想知道难道必须通过 .env.local 这个文件来配置吗？肯定不是吧，不然真实生产环境要怎么用？

---

那就创建 Github Actions 的 workflow 来部署吧。（如果不会带来费用的话）

---

github 报错了：
```
1s
Run actions/setup-node@v4
  with:
    node-version: 20
    cache: pnpm
    always-auth: false
    check-latest: false
    token: ***
  env:
    VITE_SUPABASE_URL: 
    VITE_SUPABASE_ANON_KEY: 
    VITE_WEBSOCKET_URL: 
    NODE_ENV: production
Found in cache @ /opt/hostedtoolcache/node/20.19.4/x64
Environment details
  node: v20.19.4
  npm: 10.8.2
  yarn: 1.22.22
Error: Unable to locate executable file: pnpm. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.
Run actions/setup-node@v4
  with:
    node-version: 20
    cache: pnpm
    always-auth: false
    check-latest: false
    token: ***
  env:
    VITE_SUPABASE_URL: 
    VITE_SUPABASE_ANON_KEY: 
    VITE_WEBSOCKET_URL: 
    NODE_ENV: production
Found in cache @ /opt/hostedtoolcache/node/20.19.4/x64
Environment details
  node: v20.19.4
  npm: 10.8.2
  yarn: 1.22.22
Error: Unable to locate executable file: pnpm. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.
```

---

仍然报错：

```
Run actions/setup-node@v4
  with:
    node-version: 20
    cache: pnpm
    always-auth: false
    check-latest: false
    token: ***
  env:
    VITE_SUPABASE_URL: 
    VITE_SUPABASE_ANON_KEY: 
    VITE_WEBSOCKET_URL: 
    NODE_ENV: production
Found in cache @ /opt/hostedtoolcache/node/20.19.4/x64
Environment details
  node: v20.19.4
  npm: 10.8.2
  yarn: 1.22.22
Error: Unable to locate executable file: pnpm. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.
```

---

仍然报几乎完全一样的错误。你能不能改变一些提示信息让我确认是新的脚本在运行？比如把打印信息都改成中文？

---

我感觉我好像看出来问题在哪儿了，
一开始还没安装 pnpm ，你就要检查 pnpm ，所以报错了。是不是这样？
你安装 pnpm 的具体步骤在哪里？我没看出来。

---

现在又在「设置 Node.js（启用 pnpm 缓存）」这一步报错了：

```
Run actions/setup-node@v4
  with:
    node-version: 20
    cache: pnpm
    always-auth: false
    check-latest: false
    token: ***
  env:
    VITE_SUPABASE_URL: 
    VITE_SUPABASE_ANON_KEY: 
    VITE_WEBSOCKET_URL: 
    NODE_ENV: production
Found in cache @ /opt/hostedtoolcache/node/20.19.4/x64
Environment details
  node: v20.19.4
  npm: 10.8.2
  yarn: 1.22.22
Error: Unable to locate executable file: pnpm. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.
```

你看看你的顺序：
- 检出仓库代码
- 设置 Node.js（启用 pnpm 缓存）【在这里报错】
- 安装 pnpm（官方 Action）
- 打印环境与版本信息
- 校验 pnpm 可用性
- 检查必需的 Secrets
- 安装依赖（pnpm）
- 构建（pnpm）
- ……

我刚才已经说了，你在这一步就已经要检查 pnpm 了，但实际上它根本还没安装好，所以肯定会报错啊。
你还让我把环境和版本信息贴给你，但都还没到这个步骤就报错了，哪里来的环境和版本信息？

---

新的报错：

```
Run set -e
  set -e
  missing=()
  [ -n "$VITE_SUPABASE_URL" ] || missing+=("VITE_SUPABASE_URL")
  [ -n "$VITE_SUPABASE_ANON_KEY" ] || missing+=("VITE_SUPABASE_ANON_KEY")
  [ -n "$VITE_WEBSOCKET_URL" ] || missing+=("VITE_WEBSOCKET_URL")
  if [ ${#missing[@]} -gt 0 ]; then
    echo "❌ 缺少必要的 Secrets：${missing[*]}" >&2
    echo "请在 仓库 Settings → Secrets and variables → Actions 添加上述变量后重试。" >&2
    exit 1
  fi
  echo "✅ Secrets 检查通过（值不会在日志中显示）。"
  shell: /usr/bin/bash -e {0}
  env:
    VITE_SUPABASE_URL: 
    VITE_SUPABASE_ANON_KEY: 
    VITE_WEBSOCKET_URL: 
    NODE_ENV: production
    PNPM_HOME: /home/runner/setup-pnpm/node_modules/.bin
❌ 缺少必要的 Secrets：VITE_SUPABASE_URL VITE_SUPABASE_ANON_KEY VITE_WEBSOCKET_URL
请在 仓库 Settings → Secrets and variables → Actions 添加上述变量后重试。
Error: Process completed with exit code 1.
```

但是我已经在仓库的 Settings → Secrets and variables → Actions 里添加了这些变量啊，为什么它还说我没添加？
而且我在 secrets 和 vars 里都添加了。
我想知道你做检查的逻辑是不是有问题？
`-n "$VITE_SUPABASE_URL"` 这个是什么意思？
难道不应该是 `${{ vars.VITE_SUPABASE_URL }}` 或者 `${{ secrets.VITE_SUPABASE_URL }}` 这样吗？

---

新的报错出现了，首先，在「安装依赖(pnpm)」这个步骤，我看到日志有说 `devDependencies: skipped because NODE_ENV is set to production`

然后，在「构建（pnpm）」这个步骤，报错：

```
Run pnpm build

> multi-player-demo@0.0.0 build /home/runner/work/multi-player-demo/multi-player-demo
> vite build

sh: 1: vite: not found
 ELIFECYCLE  Command failed.
Error: Process completed with exit code 1.
```

看起来是因为在生产环境中，`devDependencies` 不会被安装，而 `vite` 是作为开发依赖存在的，因此在构建时找不到 `vite` 命令。

那应该怎么构建呢？

---

构建问题解决了。
现在我希望登录之后，重定向到 supabase 后台设置的 SiteURL ，要怎么做？



